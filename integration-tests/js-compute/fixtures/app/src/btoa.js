import { assert, assertThrows } from './assertions.js';
import { routes } from './routes';

routes.set('/btoa', () => {
  // btoa
  {
    var everything = '';
    for (var i = 0; i < 256; i++) {
      everything += String.fromCharCode(i);
    }
    assert(
      btoa(everything),
      'AAECAwQFBgcICQoLDA0ODxAREhMUFRYXGBkaGxwdHh8gISIjJCUmJygpKissLS4vMDEyMzQ1Njc4OTo7PD0+P0BBQkNERUZHSElKS0xNTk9QUVJTVFVWV1hZWltcXV5fYGFiY2RlZmdoaWprbG1ub3BxcnN0dXZ3eHl6e3x9fn+AgYKDhIWGh4iJiouMjY6PkJGSk5SVlpeYmZqbnJ2en6ChoqOkpaanqKmqq6ytrq+wsbKztLW2t7i5uru8vb6/wMHCw8TFxsfIycrLzM3Oz9DR0tPU1dbX2Nna29zd3t/g4eLj5OXm5+jp6uvs7e7v8PHy8/T19vf4+fr7/P3+/w==',
    );

    assert(btoa(42), btoa('42'));
    assert(btoa(null), btoa('null'));
    assert(btoa({ x: 1 }), btoa('[object Object]'));

    assertThrows(() => btoa(), TypeError);
    assertThrows(() => btoa('üê±'));

    assert(btoa(''), '', `btoa("")`);
    assert(btoa('ab'), 'YWI=', `btoa("ab")`);
    assert(btoa('abc'), 'YWJj', `btoa("abc")`);
    assert(btoa('abcd'), 'YWJjZA==', `btoa("abcd")`);
    assert(btoa('abcde'), 'YWJjZGU=', `btoa("abcde")`);
    assert(btoa('√ø√ø√Ä'), '///A', `btoa("√ø√ø√Ä")`);
    assert(btoa('\0a'), 'AGE=', `btoa("\\0a")`);
    assert(btoa('a\0b'), 'YQBi', `btoa("a\\0b")`);
    assert(btoa(undefined), 'dW5kZWZpbmVk', `btoa(undefined)`);
    assert(btoa(null), 'bnVsbA==', `btoa(null)`);
    assert(btoa(7), 'Nw==', `btoa(7)`);
    assert(btoa(12), 'MTI=', `btoa(12)`);
    assert(btoa(1.5), 'MS41', `btoa(1.5)`);
    assert(btoa(true), 'dHJ1ZQ==', `btoa(true)`);
    assert(btoa(false), 'ZmFsc2U=', `btoa(false)`);
    assert(btoa(NaN), 'TmFO', `btoa(NaN)`);
    assert(btoa(Infinity), 'SW5maW5pdHk=', `btoa(Infinity)`);
    assert(btoa(-Infinity), 'LUluZmluaXR5', `btoa(-Infinity)`);
    assert(btoa(0), 'MA==', `btoa(0)`);
    assert(btoa(-0), 'MA==', `btoa(-0)`);
    assert(btoa('\0'), 'AA==', `btoa("\\0")`);
    assert(btoa('\x01'), 'AQ==', `btoa("\\x01")`);
    assert(btoa('\x02'), 'Ag==', `btoa("\\x02")`);
    assert(btoa('\x03'), 'Aw==', `btoa("\\x03")`);
    assert(btoa('\x04'), 'BA==', `btoa("\\x04")`);
    assert(btoa('\x05'), 'BQ==', `btoa("\\x05")`);
    assert(btoa('\x06'), 'Bg==', `btoa("\\x06")`);
    assert(btoa('\x07'), 'Bw==', `btoa("\\x07")`);
    assert(btoa('\b'), 'CA==', `btoa("\\b")`);
    assert(btoa('\t'), 'CQ==', `btoa("\\t")`);
    assert(btoa('\n'), 'Cg==', `btoa("\\n")`);
    assert(btoa('\v'), 'Cw==', `btoa("\\v")`);
    assert(btoa('\f'), 'DA==', `btoa("\\f")`);
    assert(btoa('\r'), 'DQ==', `btoa("\\r")`);
    assert(btoa('\x0e'), 'Dg==', `btoa("\\x0e")`);
    assert(btoa('\x0f'), 'Dw==', `btoa("\\x0f")`);
    assert(btoa('\x10'), 'EA==', `btoa("\\x10")`);
    assert(btoa('\x11'), 'EQ==', `btoa("\\x11")`);
    assert(btoa('\x12'), 'Eg==', `btoa("\\x12")`);
    assert(btoa('\x13'), 'Ew==', `btoa("\\x13")`);
    assert(btoa('\x14'), 'FA==', `btoa("\\x14")`);
    assert(btoa('\x15'), 'FQ==', `btoa("\\x15")`);
    assert(btoa('\x16'), 'Fg==', `btoa("\\x16")`);
    assert(btoa('\x17'), 'Fw==', `btoa("\\x17")`);
    assert(btoa('\x18'), 'GA==', `btoa("\\x18")`);
    assert(btoa('\x19'), 'GQ==', `btoa("\\x19")`);
    assert(btoa('\x1a'), 'Gg==', `btoa("\\x1a")`);
    assert(btoa('\x1b'), 'Gw==', `btoa("\\x1b")`);
    assert(btoa('\x1c'), 'HA==', `btoa("\\x1c")`);
    assert(btoa('\x1d'), 'HQ==', `btoa("\\x1d")`);
    assert(btoa('\x1e'), 'Hg==', `btoa("\\x1e")`);
    assert(btoa('\x1f'), 'Hw==', `btoa("\\x1f")`);
    assert(btoa(' '), 'IA==', `btoa(" ")`);
    assert(btoa('!'), 'IQ==', `btoa("!")`);
    assert(btoa('#'), 'Iw==', `btoa("#")`);
    assert(btoa('$'), 'JA==', `btoa("$")`);
    assert(btoa('%'), 'JQ==', `btoa("%")`);
    assert(btoa('&'), 'Jg==', `btoa("&")`);
    assert(btoa("'"), 'Jw==', `btoa("'")`);
    assert(btoa('('), 'KA==', `btoa("(")`);
    assert(btoa(')'), 'KQ==', `btoa(")")`);
    assert(btoa('*'), 'Kg==', `btoa("*")`);
    assert(btoa('+'), 'Kw==', `btoa("+")`);
    assert(btoa(','), 'LA==', `btoa(",")`);
    assert(btoa('-'), 'LQ==', `btoa("-")`);
    assert(btoa('.'), 'Lg==', `btoa(".")`);
    assert(btoa('/'), 'Lw==', `btoa("/")`);
    assert(btoa('0'), 'MA==', `btoa("0")`);
    assert(btoa('1'), 'MQ==', `btoa("1")`);
    assert(btoa('2'), 'Mg==', `btoa("2")`);
    assert(btoa('3'), 'Mw==', `btoa("3")`);
    assert(btoa('4'), 'NA==', `btoa("4")`);
    assert(btoa('5'), 'NQ==', `btoa("5")`);
    assert(btoa('6'), 'Ng==', `btoa("6")`);
    assert(btoa('7'), 'Nw==', `btoa("7")`);
    assert(btoa('8'), 'OA==', `btoa("8")`);
    assert(btoa('9'), 'OQ==', `btoa("9")`);
    assert(btoa(':'), 'Og==', `btoa(":")`);
    assert(btoa(';'), 'Ow==', `btoa(";")`);
    assert(btoa('<'), 'PA==', `btoa("<")`);
    assert(btoa('='), 'PQ==', `btoa("=")`);
    assert(btoa('>'), 'Pg==', `btoa(">")`);
    assert(btoa('?'), 'Pw==', `btoa("?")`);
    assert(btoa('@'), 'QA==', `btoa("@")`);
    assert(btoa('A'), 'QQ==', `btoa("A")`);
    assert(btoa('B'), 'Qg==', `btoa("B")`);
    assert(btoa('C'), 'Qw==', `btoa("C")`);
    assert(btoa('D'), 'RA==', `btoa("D")`);
    assert(btoa('E'), 'RQ==', `btoa("E")`);
    assert(btoa('F'), 'Rg==', `btoa("F")`);
    assert(btoa('G'), 'Rw==', `btoa("G")`);
    assert(btoa('H'), 'SA==', `btoa("H")`);
    assert(btoa('I'), 'SQ==', `btoa("I")`);
    assert(btoa('J'), 'Sg==', `btoa("J")`);
    assert(btoa('K'), 'Sw==', `btoa("K")`);
    assert(btoa('L'), 'TA==', `btoa("L")`);
    assert(btoa('M'), 'TQ==', `btoa("M")`);
    assert(btoa('N'), 'Tg==', `btoa("N")`);
    assert(btoa('O'), 'Tw==', `btoa("O")`);
    assert(btoa('P'), 'UA==', `btoa("P")`);
    assert(btoa('Q'), 'UQ==', `btoa("Q")`);
    assert(btoa('R'), 'Ug==', `btoa("R")`);
    assert(btoa('S'), 'Uw==', `btoa("S")`);
    assert(btoa('T'), 'VA==', `btoa("T")`);
    assert(btoa('U'), 'VQ==', `btoa("U")`);
    assert(btoa('V'), 'Vg==', `btoa("V")`);
    assert(btoa('W'), 'Vw==', `btoa("W")`);
    assert(btoa('X'), 'WA==', `btoa("X")`);
    assert(btoa('Y'), 'WQ==', `btoa("Y")`);
    assert(btoa('Z'), 'Wg==', `btoa("Z")`);
    assert(btoa('['), 'Ww==', `btoa("[")`);
    assert(btoa('\\'), 'XA==', `btoa("\\\\")`);
    assert(btoa(']'), 'XQ==', `btoa("]")`);
    assert(btoa('^'), 'Xg==', `btoa("^")`);
    assert(btoa('_'), 'Xw==', `btoa("_")`);
    assert(btoa('a'), 'YQ==', `btoa("a")`);
    assert(btoa('b'), 'Yg==', `btoa("b")`);
    assert(btoa('c'), 'Yw==', `btoa("c")`);
    assert(btoa('d'), 'ZA==', `btoa("d")`);
    assert(btoa('e'), 'ZQ==', `btoa("e")`);
    assert(btoa('f'), 'Zg==', `btoa("f")`);
    assert(btoa('g'), 'Zw==', `btoa("g")`);
    assert(btoa('h'), 'aA==', `btoa("h")`);
    assert(btoa('i'), 'aQ==', `btoa("i")`);
    assert(btoa('j'), 'ag==', `btoa("j")`);
    assert(btoa('k'), 'aw==', `btoa("k")`);
    assert(btoa('l'), 'bA==', `btoa("l")`);
    assert(btoa('m'), 'bQ==', `btoa("m")`);
    assert(btoa('n'), 'bg==', `btoa("n")`);
    assert(btoa('o'), 'bw==', `btoa("o")`);
    assert(btoa('p'), 'cA==', `btoa("p")`);
    assert(btoa('q'), 'cQ==', `btoa("q")`);
    assert(btoa('r'), 'cg==', `btoa("r")`);
    assert(btoa('s'), 'cw==', `btoa("s")`);
    assert(btoa('t'), 'dA==', `btoa("t")`);
    assert(btoa('u'), 'dQ==', `btoa("u")`);
    assert(btoa('v'), 'dg==', `btoa("v")`);
    assert(btoa('w'), 'dw==', `btoa("w")`);
    assert(btoa('x'), 'eA==', `btoa("x")`);
    assert(btoa('y'), 'eQ==', `btoa("y")`);
    assert(btoa('z'), 'eg==', `btoa("z")`);
    assert(btoa('{'), 'ew==', `btoa("{")`);
    assert(btoa('|'), 'fA==', `btoa("|")`);
    assert(btoa('}'), 'fQ==', `btoa("}")`);
    assert(btoa('~'), 'fg==', `btoa("~")`);
    assert(btoa(''), 'fw==', `btoa("")`);
    assert(btoa('¬Ä'), 'gA==', `btoa("¬Ä")`);
    assert(btoa('¬Å'), 'gQ==', `btoa("¬Å")`);
    assert(btoa('¬Ç'), 'gg==', `btoa("¬Ç")`);
    assert(btoa('¬É'), 'gw==', `btoa("¬É")`);
    assert(btoa('¬Ñ'), 'hA==', `btoa("¬Ñ")`);
    // eslint-disable-next-line no-irregular-whitespace
    assert(btoa('¬Ö'), 'hQ==', `btoa("¬Ö")`);
    assert(btoa('¬Ü'), 'hg==', `btoa("¬Ü")`);
    assert(btoa('¬á'), 'hw==', `btoa("¬á")`);
    assert(btoa('¬à'), 'iA==', `btoa("¬à")`);
    assert(btoa('¬â'), 'iQ==', `btoa("¬â")`);
    assert(btoa('¬ä'), 'ig==', `btoa("¬ä")`);
    assert(btoa('¬ã'), 'iw==', `btoa("¬ã")`);
    assert(btoa('¬å'), 'jA==', `btoa("¬å")`);
    assert(btoa('¬ç'), 'jQ==', `btoa("¬ç")`);
    assert(btoa('¬é'), 'jg==', `btoa("¬é")`);
    assert(btoa('¬è'), 'jw==', `btoa("¬è")`);
    assert(btoa('¬ê'), 'kA==', `btoa("¬ê")`);
    assert(btoa('¬ë'), 'kQ==', `btoa("¬ë")`);
    assert(btoa('¬í'), 'kg==', `btoa("¬í")`);
    assert(btoa('¬ì'), 'kw==', `btoa("¬ì")`);
    assert(btoa('¬î'), 'lA==', `btoa("¬î")`);
    assert(btoa('¬ï'), 'lQ==', `btoa("¬ï")`);
    assert(btoa('¬ñ'), 'lg==', `btoa("¬ñ")`);
    assert(btoa('¬ó'), 'lw==', `btoa("¬ó")`);
    assert(btoa('¬ò'), 'mA==', `btoa("¬ò")`);
    assert(btoa('¬ô'), 'mQ==', `btoa("¬ô")`);
    assert(btoa('¬ö'), 'mg==', `btoa("¬ö")`);
    assert(btoa('¬õ'), 'mw==', `btoa("¬õ")`);
    assert(btoa('¬ú'), 'nA==', `btoa("¬ú")`);
    assert(btoa('¬ù'), 'nQ==', `btoa("¬ù")`);
    assert(btoa('¬û'), 'ng==', `btoa("¬û")`);
    assert(btoa('¬ü'), 'nw==', `btoa("¬ü")`);
    // eslint-disable-next-line no-irregular-whitespace
    assert(btoa('¬†'), 'oA==', `btoa("¬†")`);
    assert(btoa('¬°'), 'oQ==', `btoa("¬°")`);
    assert(btoa('¬¢'), 'og==', `btoa("¬¢")`);
    assert(btoa('¬£'), 'ow==', `btoa("¬£")`);
    assert(btoa('¬§'), 'pA==', `btoa("¬§")`);
    assert(btoa('¬•'), 'pQ==', `btoa("¬•")`);
    assert(btoa('¬¶'), 'pg==', `btoa("¬¶")`);
    assert(btoa('¬ß'), 'pw==', `btoa("¬ß")`);
    assert(btoa('¬®'), 'qA==', `btoa("¬®")`);
    assert(btoa('¬©'), 'qQ==', `btoa("¬©")`);
    assert(btoa('¬™'), 'qg==', `btoa("¬™")`);
    assert(btoa('¬´'), 'qw==', `btoa("¬´")`);
    assert(btoa('¬¨'), 'rA==', `btoa("¬¨")`);
    assert(btoa('¬≠'), 'rQ==', `btoa("¬≠")`);
    assert(btoa('¬Æ'), 'rg==', `btoa("¬Æ")`);
    assert(btoa('¬Ø'), 'rw==', `btoa("¬Ø")`);
    assert(btoa('¬∞'), 'sA==', `btoa("¬∞")`);
    assert(btoa('¬±'), 'sQ==', `btoa("¬±")`);
    assert(btoa('¬≤'), 'sg==', `btoa("¬≤")`);
    assert(btoa('¬≥'), 'sw==', `btoa("¬≥")`);
    assert(btoa('¬¥'), 'tA==', `btoa("¬¥")`);
    assert(btoa('¬µ'), 'tQ==', `btoa("¬µ")`);
    assert(btoa('¬∂'), 'tg==', `btoa("¬∂")`);
    assert(btoa('¬∑'), 'tw==', `btoa("¬∑")`);
    assert(btoa('¬∏'), 'uA==', `btoa("¬∏")`);
    assert(btoa('¬π'), 'uQ==', `btoa("¬π")`);
    assert(btoa('¬∫'), 'ug==', `btoa("¬∫")`);
    assert(btoa('¬ª'), 'uw==', `btoa("¬ª")`);
    assert(btoa('¬º'), 'vA==', `btoa("¬º")`);
    assert(btoa('¬Ω'), 'vQ==', `btoa("¬Ω")`);
    assert(btoa('¬æ'), 'vg==', `btoa("¬æ")`);
    assert(btoa('¬ø'), 'vw==', `btoa("¬ø")`);
    assert(btoa('√Ä'), 'wA==', `btoa("√Ä")`);
    assert(btoa('√Å'), 'wQ==', `btoa("√Å")`);
    assert(btoa('√Ç'), 'wg==', `btoa("√Ç")`);
    assert(btoa('√É'), 'ww==', `btoa("√É")`);
    assert(btoa('√Ñ'), 'xA==', `btoa("√Ñ")`);
    assert(btoa('√Ö'), 'xQ==', `btoa("√Ö")`);
    assert(btoa('√Ü'), 'xg==', `btoa("√Ü")`);
    assert(btoa('√á'), 'xw==', `btoa("√á")`);
    assert(btoa('√à'), 'yA==', `btoa("√à")`);
    assert(btoa('√â'), 'yQ==', `btoa("√â")`);
    assert(btoa('√ä'), 'yg==', `btoa("√ä")`);
    assert(btoa('√ã'), 'yw==', `btoa("√ã")`);
    assert(btoa('√å'), 'zA==', `btoa("√å")`);
    assert(btoa('√ç'), 'zQ==', `btoa("√ç")`);
    assert(btoa('√é'), 'zg==', `btoa("√é")`);
    assert(btoa('√è'), 'zw==', `btoa("√è")`);
    assert(btoa('√ê'), '0A==', `btoa("√ê")`);
    assert(btoa('√ë'), '0Q==', `btoa("√ë")`);
    assert(btoa('√í'), '0g==', `btoa("√í")`);
    assert(btoa('√ì'), '0w==', `btoa("√ì")`);
    assert(btoa('√î'), '1A==', `btoa("√î")`);
    assert(btoa('√ï'), '1Q==', `btoa("√ï")`);
    assert(btoa('√ñ'), '1g==', `btoa("√ñ")`);
    assert(btoa('√ó'), '1w==', `btoa("√ó")`);
    assert(btoa('√ò'), '2A==', `btoa("√ò")`);
    assert(btoa('√ô'), '2Q==', `btoa("√ô")`);
    assert(btoa('√ö'), '2g==', `btoa("√ö")`);
    assert(btoa('√õ'), '2w==', `btoa("√õ")`);
    assert(btoa('√ú'), '3A==', `btoa("√ú")`);
    assert(btoa('√ù'), '3Q==', `btoa("√ù")`);
    assert(btoa('√û'), '3g==', `btoa("√û")`);
    assert(btoa('√ü'), '3w==', `btoa("√ü")`);
    assert(btoa('√†'), '4A==', `btoa("√†")`);
    assert(btoa('√°'), '4Q==', `btoa("√°")`);
    assert(btoa('√¢'), '4g==', `btoa("√¢")`);
    assert(btoa('√£'), '4w==', `btoa("√£")`);
    assert(btoa('√§'), '5A==', `btoa("√§")`);
    assert(btoa('√•'), '5Q==', `btoa("√•")`);
    assert(btoa('√¶'), '5g==', `btoa("√¶")`);
    assert(btoa('√ß'), '5w==', `btoa("√ß")`);
    assert(btoa('√®'), '6A==', `btoa("√®")`);
    assert(btoa('√©'), '6Q==', `btoa("√©")`);
    assert(btoa('√™'), '6g==', `btoa("√™")`);
    assert(btoa('√´'), '6w==', `btoa("√´")`);
    assert(btoa('√¨'), '7A==', `btoa("√¨")`);
    assert(btoa('√≠'), '7Q==', `btoa("√≠")`);
    assert(btoa('√Æ'), '7g==', `btoa("√Æ")`);
    assert(btoa('√Ø'), '7w==', `btoa("√Ø")`);
    assert(btoa('√∞'), '8A==', `btoa("√∞")`);
    assert(btoa('√±'), '8Q==', `btoa("√±")`);
    assert(btoa('√≤'), '8g==', `btoa("√≤")`);
    assert(btoa('√≥'), '8w==', `btoa("√≥")`);
    assert(btoa('√¥'), '9A==', `btoa("√¥")`);
    assert(btoa('√µ'), '9Q==', `btoa("√µ")`);
    assert(btoa('√∂'), '9g==', `btoa("√∂")`);
    assert(btoa('√∑'), '9w==', `btoa("√∑")`);
    assert(btoa('√∏'), '+A==', `btoa("√∏")`);
    assert(btoa('√π'), '+Q==', `btoa("√π")`);
    assert(btoa('√∫'), '+g==', `btoa("√∫")`);
    assert(btoa('√ª'), '+w==', `btoa("√ª")`);
    assert(btoa('√º'), '/A==', `btoa("√º")`);
    assert(btoa('√Ω'), '/Q==', `btoa("√Ω")`);
    assert(btoa('√æ'), '/g==', `btoa("√æ")`);
    assert(btoa('√ø'), '/w==', `btoa("√ø")`);
  }

  // atob
  {
    assert(atob(''), '', `atob("")`);
    assert(atob('abcd'), 'i¬∑\x1D');
    assert(atob(' abcd'), 'i¬∑\x1D');
    assert(atob('abcd '), 'i¬∑\x1D');
    assertThrows(() => atob(' abcd==='));
    assertThrows(() => atob('abcd=== '));
    assertThrows(() => atob('abcd ==='));
    assertThrows(() => atob('a'));
    assert(atob('ab'), 'i');
    assert(atob('abc'), 'i¬∑');
    assertThrows(() => atob('abcde'));
    assertThrows(() => atob('êÄÄ'));
    assertThrows(() => atob('='));
    assertThrows(() => atob('=='));
    assertThrows(() => atob('==='));
    assertThrows(() => atob('===='));
    assertThrows(() => atob('====='));
    assertThrows(() => atob('a='));
    assertThrows(() => atob('a=='));
    assertThrows(() => atob('a==='));
    assertThrows(() => atob('a===='));
    assertThrows(() => atob('a====='));
    assertThrows(() => atob('ab='));
    assert(atob('ab=='), 'i');
    assertThrows(() => atob('ab==='));
    assertThrows(() => atob('ab===='));
    assertThrows(() => atob('ab====='));
    assert(atob('abc='), 'i¬∑');
    assertThrows(() => atob('abc=='));
    assertThrows(() => atob('abc==='));
    assertThrows(() => atob('abc===='));
    assertThrows(() => atob('abc====='));
    assertThrows(() => atob('abcd='));
    assertThrows(() => atob('abcd=='));
    assertThrows(() => atob('abcd==='));
    assertThrows(() => atob('abcd===='));
    assertThrows(() => atob('abcd====='));
    assertThrows(() => atob('abcde='));
    assertThrows(() => atob('abcde=='));
    assertThrows(() => atob('abcde==='));
    assertThrows(() => atob('abcde===='));
    assertThrows(() => atob('abcde====='));
    assertThrows(() => atob('=a'));
    assertThrows(() => atob('=a='));
    assertThrows(() => atob('a=b'));
    assertThrows(() => atob('a=b='));
    assertThrows(() => atob('ab=c'));
    assertThrows(() => atob('ab=c='));
    assertThrows(() => atob('abc=d'));
    assertThrows(() => atob('abc=d='));
    assertThrows(() => atob('ab\u000Bcd'));
    assertThrows(() => atob('ab\u3000cd'));
    assertThrows(() => atob('ab\u3001cd'));
    assert(atob('ab\tcd'), 'i¬∑\x1D');
    assert(atob('ab\ncd'), 'i¬∑\x1D');
    assert(atob('ab\fcd'), 'i¬∑\x1D');
    assert(atob('ab\rcd'), 'i¬∑\x1D');
    assert(atob('ab cd'), 'i¬∑\x1D');
    assertThrows(() => atob('ab\u00a0cd'));
    assert(atob('ab\t\n\f\r cd'), 'i¬∑\x1D');
    assert(atob(' \t\n\f\r ab\t\n\f\r cd\t\n\f\r '), 'i¬∑\x1D');
    assert(atob('ab\t\n\f\r =\t\n\f\r =\t\n\f\r '), 'i');
    assertThrows(() => atob('A'));
    assert(atob('/A'), '√º');
    assert(atob('//A'), '√ø√∞');
    assert(atob('///A'), '√ø√ø√Ä');
    assertThrows(() => atob('////A'));
    assertThrows(() => atob('/'));
    assert(atob('A/'), '\x03');
    assert(atob('AA/'), '\x00\x0F');
    assertThrows(() => atob('AAAA/'));
    assert(atob('AAA/'), '\x00\x00?');
    assertThrows(() => atob('\u0000nonsense'));
    assertThrows(() => atob('abcd\u0000nonsense'));
    assert(atob('YQ'), 'a');
    assert(atob('YR'), 'a');
    assertThrows(() => atob('~~'));
    assertThrows(() => atob('..'));
    assertThrows(() => atob('--'));
    assertThrows(() => atob('__'));
  }
});
